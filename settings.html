<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ü–æ–ª–Ω–∞—è –¥–µ–º–æ Telegram Web App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: var(--tg-theme-bg-color, #ffffff);
      color: var(--tg-theme-text-color, #000000);
    }
    button {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      font-size: 16px;
    }
    h1 {
      margin-bottom: 10px;
    }
    #user-info {
      font-weight: bold;
      margin-bottom: 15px;
    }
    hr {
      margin: 15px 0;
    }
  </style>
</head>
<body>
  <h1>Telegram Web App</h1>
  <div id="user-info">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  <div id="platform-info"></div>

  <button onclick="sendData()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É</button>
  <button onclick="expandApp()">‚õ∂ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
  <button onclick="closeApp()">‚úñ –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>

  <hr>
  <button onclick="showAlert()">üîî –ü–æ–∫–∞–∑–∞—Ç—å Alert</button>
  <button onclick="showConfirm()">‚ùì –ü–æ–∫–∞–∑–∞—Ç—å Confirm</button>
  <button onclick="showPopup()">üß© –ü–æ–∫–∞–∑–∞—Ç—å Popup</button>

  <hr>
  <button onclick="showBackButton()">üîô –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –ù–∞–∑–∞–¥</button>

  <hr>
  <button onclick="changeColors()">üé® –ò–∑–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç–∞</button>
  <button onclick="tg.enableClosingConfirmation()">‚ö†Ô∏è –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–∞</button>
  <button onclick="tg.disableClosingConfirmation()">‚úÖ –í—ã–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–∞</button>

  <hr>
  <button onclick="vibrateLight()">üì≥ –í–∏–±—Ä–æ: –õ—ë–≥–∫–æ–µ</button>
  <button onclick="vibrateSuccess()">üì≥ –í–∏–±—Ä–æ: –£—Å–ø–µ—Ö</button>
  <button onclick="vibrateSelection()">üì≥ –í–∏–±—Ä–æ: –í—ã–±–æ—Ä</button>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    const user = tg.initDataUnsafe.user;
    const infoEl = document.getElementById("user-info");
    const platformInfo = document.getElementById("platform-info");

    infoEl.innerText = `–ü—Ä–∏–≤–µ—Ç, ${user.first_name} ${user.last_name || ''} (@${user.username || '–±–µ–∑ –Ω–∏–∫–∞'})`;
    platformInfo.innerText = `–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${tg.platform} | –¢–µ–º–∞: ${tg.colorScheme} | –í–µ—Ä—Å–∏—è API: ${tg.version}`;

    // MainButton –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
    tg.MainButton.setText("‚¨ÜÔ∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑ –∫–Ω–æ–ø–∫–∏").show().onClick(() => {
      tg.sendData("–î–∞–Ω–Ω—ã–µ –∏–∑ MainButton");
    });

    function sendData() {
      tg.sendData("–î–∞–Ω–Ω—ã–µ –æ—Ç –∫–Ω–æ–ø–∫–∏ '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É'");
    }

    function expandApp() {
      tg.expand();
    }

    function closeApp() {
      tg.close();
    }

    function showAlert() {
      tg.showAlert("–≠—Ç–æ alert-—Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç WebApp!");
    }

    function showConfirm() {
      tg.showConfirm("–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ").then(result => {
        tg.showAlert(result ? "‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ" : "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ");
      });
    }

    function showPopup() {
      tg.showPopup({
        title: "–í—ã–±–æ—Ä –æ–ø—Ü–∏–∏",
        message: "–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–Ω–æ–ø–æ–∫:",
        buttons: [
          { id: 'opt1', type: 'default', text: '–û–ø—Ü–∏—è 1' },
          { id: 'opt2', type: 'destructive', text: '–û–ø—Ü–∏—è 2' },
          { type: 'cancel' }
        ]
      }).then(id => {
        if (id) tg.showAlert("–í—ã –≤—ã–±—Ä–∞–ª–∏: " + id);
      });
    }

    function showBackButton() {
      tg.BackButton.show();
      tg.BackButton.onClick(() => {
        tg.showAlert("–ù–∞–∑–∞–¥ –Ω–∞–∂–∞—Ç–æ");
        tg.BackButton.hide();
      });
    }

    function changeColors() {
      tg.setHeaderColor('#2296f3');
      tg.setBackgroundColor('#e0f7fa');
      tg.showAlert("–¶–≤–µ—Ç–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!");
    }

    // Haptic Feedback
    function vibrateLight() {
      tg.HapticFeedback.impactOccurred('light');
    }

    function vibrateSuccess() {
      tg.HapticFeedback.notificationOccurred('success');
    }

    function vibrateSelection() {
      tg.HapticFeedback.selectionChanged();
    }
  </script>
</body>
</html>
